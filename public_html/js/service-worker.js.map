{"version":3,"file":"service-worker.js","sources":["service-worker.js"],"sourcesContent":["// Define the cache name and the URLs to cache\r\nconst CACHE_NAME = 'hulajdusza-cache-v1';\r\nconst urlsToCache = [\r\n  '/',\r\n  '/index.html',\r\n  '/about.html',\r\n  '/services.html',\r\n  '/contact.html',\r\n  '/content/cookies.html',\r\n  '/content/pricing.html',\r\n  '/content/privacy.html',\r\n  '/css/style.css',\r\n  '/css/index.css',\r\n  '/css/services.css',\r\n  '/css/about.css',\r\n  '/css/contact.css',\r\n  '/css/pricing.css',\r\n  '/css/privacy.css',\r\n  '/js/script.js',\r\n  '/js/send_email.js',\r\n  '/js/phone_format.js',\r\n  '/js/sharing-buttons.js',\r\n  '/js/counters.js',\r\n  '/icons/favicon-32x32.png',\r\n  '/icons/apple-icon-57x57.png',\r\n  '/img/Logo/HulajDusza_logo.png'\r\n];\r\n\r\n// Define the cache expiration time (in days)\r\nconst cacheExpirationTime = 30;\r\n\r\n// Install event listener\r\nself.addEventListener('install', (event) => {\r\n  // Initializes a service worker during installation.\r\n  event.waitUntil(\r\n    caches.open(CACHE_NAME)\r\n      .then((cache) => cache.addAll(urlsToCache))\r\n  );\r\n});\r\n\r\n// Fetch event listener\r\nself.addEventListener('fetch', (event) => {\r\n  // Handles browser requests for caching purposes.\r\n  event.respondWith(\r\n    async function() {\r\n      const cache = await caches.open(CACHE_NAME);\r\n      const cachedResponse = await cache.match(event.request);\r\n\r\n      if (cachedResponse) {\r\n        const cachedResponseDate = cachedResponse.headers.get('date');\r\n        const currentDate = new Date();\r\n        const expirationDate = new Date(cachedResponseDate);\r\n        expirationDate.setDate(expirationDate.getDate() + cacheExpirationTime);\r\n\r\n        if (currentDate > expirationDate) {\r\n          const newResponse = await fetch(event.request);\r\n          await cache.put(event.request, newResponse.clone());\r\n          return newResponse;\r\n        } else {\r\n          return cachedResponse;\r\n        }\r\n      } else {\r\n        const newResponse = await fetch(event.request);\r\n        await cache.put(event.request, newResponse.clone());\r\n        return newResponse;\r\n      }\r\n    }()\r\n  );\r\n});\r\n\r\n// Activate event listener\r\nself.addEventListener('activate', (event) => {\r\n  // Cleans old cache names during service worker activation.\r\n  event.waitUntil(\r\n    caches.keys().then((cacheNames) => {\r\n      // Deletes non-matching caches.\r\n      return Promise.all(\r\n        cacheNames.map((cacheName) => {\r\n          // Deletes cache entries.\r\n          if (cacheName !== CACHE_NAME) {\r\n            return caches.delete(cacheName);\r\n          }\r\n        })\r\n      );\r\n    })\r\n  );\r\n});\r\n\r\n// Push event listener\r\nself.addEventListener('push', (event) => {\r\n  // Handles incoming push notifications.\r\n  if (event.data) {\r\n    console.log('Received push data:', event.data.text());\r\n  } else {\r\n    console.log('Received empty push data');\r\n  }\r\n});\r\n\r\n// Notification click event listener\r\nself.addEventListener('notificationclick', (event) => {\r\n  // Handles notification clicks.\r\n  event.notification.close();\r\n  event.waitUntil(\r\n    clients.matchAll().then((clients) => {\r\n      // Opens a new browser window to root URL.\r\n      if (clients.openWindow) {\r\n        return clients.openWindow('/');\r\n      }\r\n    })\r\n  );\r\n});"],"names":["CACHE_NAME","urlsToCache","cacheExpirationTime","self","addEventListener","event","waitUntil","caches","open","then","cache","addAll","respondWith","async","newResponse","await","cachedResponse","match","request","cachedResponseDate","headers","get","currentDate","Date","expirationDate","setDate","getDate","fetch","put","clone","keys","Promise","all","cacheNames","map","cacheName","delete","data","console","log","text","notification","close","clients","matchAll","openWindow"],"mappings":"AACA,IAAMA,WAAa,sBACbC,YAAc,CAClB,IACA,cACA,cACA,iBACA,gBACA,wBACA,wBACA,wBACA,iBACA,iBACA,oBACA,iBACA,mBACA,mBACA,mBACA,gBACA,oBACA,sBACA,yBACA,kBACA,2BACA,8BACA,iCAIIC,oBAAsB,GAG5BC,KAAKC,iBAAiB,UAAW,IAE/BC,EAAMC,UACJC,OAAOC,KAAKR,UAAU,EACnBS,KAAK,GAAWC,EAAMC,OAAOV,WAAW,CAAC,CAC9C,CACF,CAAC,EAGDE,KAAKC,iBAAiB,QAAS,IAE7BC,EAAMO,aACJC,UACE,IAUUC,EAOFA,EAjBFJ,EAAQK,MAAMR,OAAOC,KAAKR,UAAU,EACpCgB,EAAiBD,MAAML,EAAMO,MAAMZ,EAAMa,OAAO,EAEtD,OAAIF,GACIG,EAAqBH,EAAeI,QAAQC,IAAI,MAAM,EACtDC,EAAc,IAAIC,MAClBC,EAAiB,IAAID,KAAKJ,CAAkB,GACnCM,QAAQD,EAAeE,QAAQ,EAAIxB,mBAAmB,EAEnDsB,EAAdF,GACIR,EAAcC,MAAMY,MAAMtB,EAAMa,OAAO,EAC7CH,MAAML,EAAMkB,IAAIvB,EAAMa,QAASJ,EAAYe,MAAM,CAAC,EAC3Cf,GAEAE,IAGHF,EAAcC,MAAMY,MAAMtB,EAAMa,OAAO,EAC7CH,MAAML,EAAMkB,IAAIvB,EAAMa,QAASJ,EAAYe,MAAM,CAAC,EAC3Cf,EAEX,GAAE,CACJ,CACF,CAAC,EAGDX,KAAKC,iBAAiB,WAAY,IAEhCC,EAAMC,UACJC,OAAOuB,KAAK,EAAErB,KAAK,GAEVsB,QAAQC,IACbC,EAAWC,IAAI,IAEb,GAAIC,IAAcnC,WAChB,OAAOO,OAAO6B,OAAOD,CAAS,CAElC,CAAC,CACH,CACD,CACH,CACF,CAAC,EAGDhC,KAAKC,iBAAiB,OAAQ,IAExBC,EAAMgC,KACRC,QAAQC,IAAI,sBAAuBlC,EAAMgC,KAAKG,KAAK,CAAC,EAEpDF,QAAQC,IAAI,0BAA0B,CAE1C,CAAC,EAGDpC,KAAKC,iBAAiB,oBAAqB,IAEzCC,EAAMoC,aAAaC,MAAM,EACzBrC,EAAMC,UACJqC,QAAQC,SAAS,EAAEnC,KAAK,IAEtB,GAAIkC,EAAQE,WACV,OAAOF,EAAQE,WAAW,GAAG,CAEjC,CAAC,CACH,CACF,CAAC"}