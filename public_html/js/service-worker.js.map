{"version":3,"file":"service-worker.js","sources":["service-worker.js"],"sourcesContent":["// Define the cache name and the URLs to cache\nconst CACHE_NAME = 'hulajdusza-cache-v1';\nconst urlsToCache = [\n  '/',\n  '/index.html',\n  '/about.html',\n  '/services.html',\n  '/contact.html',\n  '/content/cookies.html',\n  '/content/pricing.html',\n  '/content/privacy.html',\n  '/css/style.css',\n  '/css/index.css',\n  '/css/services.css',\n  '/css/about.css',\n  '/css/contact.css',\n  '/css/pricing.css',\n  '/css/privacy.css',\n  '/js/script.js',\n  '/js/send_email.js',\n  '/js/phone_format.js',\n  '/js/sharing-buttons.js',\n  '/js/counters.js',\n  '/icons/favicon-32x32.png',\n  '/icons/apple-icon-57x57.png',\n  '/img/Logo/HulajDusza_logo.png'\n];\n\n// Define the cache expiration time (in days)\nconst cacheExpirationTime = 30;\n\n// Install event listener\nself.addEventListener('install', (event) => {\n  // Initializes a service worker during installation.\n  event.waitUntil(\n    caches.open(CACHE_NAME)\n      .then((cache) => cache.addAll(urlsToCache))\n  );\n});\n\n// Fetch event listener\nself.addEventListener('fetch', (event) => {\n  // Handles browser requests for caching purposes.\n  event.respondWith(\n    async function() {\n      const cache = await caches.open(CACHE_NAME);\n      const cachedResponse = await cache.match(event.request);\n\n      if (cachedResponse) {\n        const cachedResponseDate = cachedResponse.headers.get('date');\n        const currentDate = new Date();\n        const expirationDate = new Date(cachedResponseDate);\n        expirationDate.setDate(expirationDate.getDate() + cacheExpirationTime);\n\n        if (currentDate > expirationDate) {\n          const newResponse = await fetch(event.request);\n          await cache.put(event.request, newResponse.clone());\n          return newResponse;\n        } else {\n          return cachedResponse;\n        }\n      } else {\n        const newResponse = await fetch(event.request);\n        await cache.put(event.request, newResponse.clone());\n        return newResponse;\n      }\n    }()\n  );\n});\n\n// Activate event listener\nself.addEventListener('activate', (event) => {\n  // Cleans old cache names during service worker activation.\n  event.waitUntil(\n    caches.keys().then((cacheNames) => {\n      // Deletes non-matching caches.\n      return Promise.all(\n        cacheNames.map((cacheName) => {\n          // Deletes cache entries.\n          if (cacheName !== CACHE_NAME) {\n            return caches.delete(cacheName);\n          }\n        })\n      );\n    })\n  );\n});\n\n// Push event listener\nself.addEventListener('push', (event) => {\n  // Handles incoming push notifications.\n  if (event.data) {\n    console.log('Received push data:', event.data.text());\n  } else {\n    console.log('Received empty push data');\n  }\n});\n\n// Notification click event listener\nself.addEventListener('notificationclick', (event) => {\n  // Handles notification clicks.\n  event.notification.close();\n  event.waitUntil(\n    clients.matchAll().then((clients) => {\n      // Opens a new browser window to root URL.\n      if (clients.openWindow) {\n        return clients.openWindow('/');\n      }\n    })\n  );\n});"],"names":["CACHE_NAME","urlsToCache","cacheExpirationTime","self","addEventListener","event","waitUntil","caches","open","then","cache","addAll","respondWith","async","newResponse","await","cachedResponse","match","request","cachedResponseDate","headers","get","currentDate","Date","expirationDate","setDate","getDate","fetch","put","clone","keys","Promise","all","cacheNames","map","cacheName","delete","data","console","log","text","notification","close","clients","matchAll","openWindow"],"mappings":"AACA,IAAMA,WAAa,sBACbC,YAAc,CAClB,IACA,cACA,cACA,iBACA,gBACA,wBACA,wBACA,wBACA,iBACA,iBACA,oBACA,iBACA,mBACA,mBACA,mBACA,gBACA,oBACA,sBACA,yBACA,kBACA,2BACA,8BACA,iCAIIC,oBAAsB,GAG5BC,KAAKC,iBAAiB,UAAW,IAE/BC,EAAMC,UACJC,OAAOC,KAAKR,UAAU,EACnBS,KAAK,GAAWC,EAAMC,OAAOV,WAAW,CAAC,CAC9C,CACF,CAAC,EAGDE,KAAKC,iBAAiB,QAAS,IAE7BC,EAAMO,aACJC,UACE,IAUUC,EAOFA,EAjBFJ,EAAQK,MAAMR,OAAOC,KAAKR,UAAU,EACpCgB,EAAiBD,MAAML,EAAMO,MAAMZ,EAAMa,OAAO,EAEtD,OAAIF,GACIG,EAAqBH,EAAeI,QAAQC,IAAI,MAAM,EACtDC,EAAc,IAAIC,MAClBC,EAAiB,IAAID,KAAKJ,CAAkB,GACnCM,QAAQD,EAAeE,QAAQ,EAAIxB,mBAAmB,EAEnDsB,EAAdF,GACIR,EAAcC,MAAMY,MAAMtB,EAAMa,OAAO,EAC7CH,MAAML,EAAMkB,IAAIvB,EAAMa,QAASJ,EAAYe,MAAM,CAAC,EAC3Cf,GAEAE,IAGHF,EAAcC,MAAMY,MAAMtB,EAAMa,OAAO,EAC7CH,MAAML,EAAMkB,IAAIvB,EAAMa,QAASJ,EAAYe,MAAM,CAAC,EAC3Cf,EAEX,GAAE,CACJ,CACF,CAAC,EAGDX,KAAKC,iBAAiB,WAAY,IAEhCC,EAAMC,UACJC,OAAOuB,KAAK,EAAErB,KAAK,GAEVsB,QAAQC,IACbC,EAAWC,IAAI,IAEb,GAAIC,IAAcnC,WAChB,OAAOO,OAAO6B,OAAOD,CAAS,CAElC,CAAC,CACH,CACD,CACH,CACF,CAAC,EAGDhC,KAAKC,iBAAiB,OAAQ,IAExBC,EAAMgC,KACRC,QAAQC,IAAI,sBAAuBlC,EAAMgC,KAAKG,KAAK,CAAC,EAEpDF,QAAQC,IAAI,0BAA0B,CAE1C,CAAC,EAGDpC,KAAKC,iBAAiB,oBAAqB,IAEzCC,EAAMoC,aAAaC,MAAM,EACzBrC,EAAMC,UACJqC,QAAQC,SAAS,EAAEnC,KAAK,IAEtB,GAAIkC,EAAQE,WACV,OAAOF,EAAQE,WAAW,GAAG,CAEjC,CAAC,CACH,CACF,CAAC"}