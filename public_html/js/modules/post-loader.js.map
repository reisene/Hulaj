{"version":3,"file":"post-loader.js","sources":["modules/post-loader.js"],"sourcesContent":["/**\n * Loads blog posts from HTML files and enables sorting and searching.\n *\n * @param {string[]} postPaths - An array of paths to the blog post HTML files.\n * @param {jQuery} postsContainer - The container element for the posts.\n *\n * @returns {Promise} A promise that resolves with an array of post elements.\n */\nfunction loadPosts(postPaths, postsContainer) {\n    const postElements = Array(postPaths.length).fill(null);\n    let loadedPosts = 0;\n  \n    postPaths.forEach((postPath, index) => {\n      fetch(postPath)\n        .then(response => {\n          if (!response.ok) {\n            throw new Error(`Failed to load post: ${postPath}`);\n          }\n\n          return response.text();\n        })\n        .then(data => {\n          // Parse HTML data, extract post details, and create a post element.\n          const parser = new DOMParser();\n          const doc = parser.parseFromString(data, 'text/html');\n  \n          // Extract post details from the HTML\n          const title = $(doc).find('h2').prop('outerHTML') || '<h2>Brak tytułu</h2>';\n          const date = $(doc).find('.post-date').prop('outerHTML') || '<p class=\"post-date\"><strong>Data publikacji:</strong> Nieznana</p>';\n          const image = $(doc).find('img').prop('outerHTML') || '<p>Brak obrazka</p>';\n          const excerpt = $(doc).find('section p').first().prop('outerHTML') || '<p>Brak treści</p>';\n  \n          // Create a post element\n          const postElement = $('<article class=\"post-article\">').html(`${title}${date}${image}<div class=\"post-content\">${excerpt}</div><button class=\"read-more\">Czytaj więcej <i class=\"bi bi-file-earmark-post\"></i></button>`);\n  \n          // Handle the \"Read More\" button click event\n          postElement.find('.read-more').on('click', function (e) {\n            // Listens for and handles a click event on the \".read-more\" element, performing\n            // several actions when triggered.\n            e.preventDefault();\n            postsContainer.html($(doc.body).html());\n            postsContainer.append('<button class=\"back-to-blog\">Powrót do bloga <i class=\"bi bi-arrow-counterclockwise\"></i></button>');\n            $('.back-to-blog').on('click', function () {\n              // Triggers on click events and reloads the current page.\n              location.reload();\n            });\n          });\n  \n          // Store the post element in the appropriate position in the array\n          postElements[index] = postElement;\n        })\n        .catch(error => {\n          // Catches and handles an error.\n          console.error('Error loading post:', error);\n          const errorElement = $('<article class=\"post-article\">').html(`<h2>Błąd</h2><p>Nie udało się załadować posta: ${postPath}</p>`);\n          postElements[index] = errorElement; // Zachowujemy błąd w odpowiednim miejscu w tablicy\n        })\n        .finally(() => {\n          // Increments and checks loadedPosts counter, then appends elements when loading is\n          // complete.\n          loadedPosts++;\n          if (loadedPosts === postPaths.length) {\n            // Append the post elements in reverse order to the container\n            postElements.reverse().forEach(element => postsContainer.append(element));\n          }\n        });\n    });\n  \n    return Promise.resolve(postElements);\n  }\n  \n  export default loadPosts;"],"names":["loadPosts","postPaths","postsContainer","postElements","Array","length","fill","loadedPosts","forEach","postPath","index","fetch","then","response","ok","text","Error","data","doc","DOMParser","parseFromString","title","$","find","prop","date","image","excerpt","first","postElement","html","on","e","preventDefault","body","append","location","reload","catch","error","console","errorElement","finally","reverse","element","Promise","resolve"],"mappings":"AAQA,SAASA,UAAUC,EAAWC,GAC1B,IAAMC,EAAeC,MAAMH,EAAUI,MAAM,EAAEC,KAAK,IAAI,EAClDC,EAAc,EA0DlB,OAxDAN,EAAUO,QAAQ,CAACC,EAAUC,KAC3BC,MAAMF,CAAQ,EACXG,KAAKC,IACJ,GAAKA,EAASC,GAId,OAAOD,EAASE,KAAK,EAHnB,MAAM,IAAIC,MAAM,wBAAwBP,CAAU,CAItD,CAAC,EACAG,KAAKK,IAGJ,IAAMC,GADS,IAAIC,WACAC,gBAAgBH,EAAM,WAAW,EAGpD,IAAMI,EAAQC,EAAEJ,CAAG,EAAEK,KAAK,IAAI,EAAEC,KAAK,WAAW,GAAK,uBAC/CC,EAAOH,EAAEJ,CAAG,EAAEK,KAAK,YAAY,EAAEC,KAAK,WAAW,GAAK,sEACtDE,EAAQJ,EAAEJ,CAAG,EAAEK,KAAK,KAAK,EAAEC,KAAK,WAAW,GAAK,sBAChDG,EAAUL,EAAEJ,CAAG,EAAEK,KAAK,WAAW,EAAEK,MAAM,EAAEJ,KAAK,WAAW,GAAK,qBAGhEK,EAAcP,EAAE,gCAAgC,EAAEQ,KAAK,GAAGT,EAAQI,EAAOC,+BAAkCC,iGAAuG,EAGxNE,EAAYN,KAAK,YAAY,EAAEQ,GAAG,QAAS,SAAUC,GAGnDA,EAAEC,eAAe,EACjB/B,EAAe4B,KAAKR,EAAEJ,EAAIgB,IAAI,EAAEJ,KAAK,CAAC,EACtC5B,EAAeiC,OAAO,oGAAoG,EAC1Hb,EAAE,eAAe,EAAES,GAAG,QAAS,WAE7BK,SAASC,OAAO,CAClB,CAAC,CACH,CAAC,EAGDlC,EAAaO,GAASmB,CACxB,CAAC,EACAS,MAAMC,IAELC,QAAQD,MAAM,sBAAuBA,CAAK,EACpCE,EAAenB,EAAE,gCAAgC,EAAEQ,uDAAuDrB,OAAc,EAC9HN,EAAaO,GAAS+B,CACxB,CAAC,EACAC,QAAQ,KAGPnC,EAAAA,IACoBN,EAAUI,QAE5BF,EAAawC,QAAQ,EAAEnC,QAAQoC,GAAW1C,EAAeiC,OAAOS,CAAO,CAAC,CAE5E,CAAC,CACL,CAAC,EAEMC,QAAQC,QAAQ3C,CAAY,CACrC,gBAEeH"}