{"version":3,"file":"button-animation.js","sources":["modules/button-animation.js"],"sourcesContent":["// Stałe dla często używanych wartości, co zmniejsza ryzyko literówek\r\nconst STATES = {\r\n    SUBMIT: 'submit',\r\n    LOADING: 'loading',\r\n    SUCCESS: 'success',\r\n    ERROR: 'error'\r\n};\r\n\r\nconst ICONS = {\r\n    PAPER_PLANE: '.fa-paper-plane',\r\n    SPINNER: '.fa-spinner',\r\n    CHECK: '.fa-check',\r\n    TIMES: '.fa-times'\r\n};\r\n\r\n/**\r\n * Shows the specified icon within the button\r\n * @param {HTMLElement} button - The button element containing the icon\r\n * @param {string} iconSelector - The CSS selector of the icon to show\r\n */\r\nfunction showIcon(button, iconSelector) {\r\n    const icon = button.querySelector(iconSelector);\r\n    if (icon) {\r\n        icon.classList.remove('hidden');\r\n    }\r\n}\r\n\r\n/**\r\n * Hides the specified icon within the button\r\n * @param {HTMLElement} button - The button element containing the icon\r\n * @param {string} iconClass - The CSS class of the icon to hide\r\n * Ukrywa wybraną ikonę w przycisku\r\n */\r\nfunction hideIcon(button, iconClass) {\r\n    const icon = button.querySelector(iconClass);\r\n    if (icon) {\r\n        icon.classList.add('hidden');\r\n    }\r\n}\r\n\r\n/**\r\n * Resetuje animację przycisku przez wymuszenie reflow\r\n */\r\nfunction resetButtonAnimation(button) {\r\n    button.style.animation = 'none';\r\n    void button.offsetHeight; // Wymuszenie reflow\r\n    button.style.animation = '';\r\n}\r\n\r\n/**\r\n * Obsługuje stan ładowania przycisku\r\n */\r\nfunction handleLoadingState(button) {\r\n    button.classList.remove(STATES.SUBMIT);\r\n    button.classList.add(STATES.LOADING);\r\n    hideIcon(button, ICONS.PAPER_PLANE);\r\n    showIcon(button, ICONS.SPINNER);\r\n}\r\n\r\n/**\r\n * Obsługuje stan sukcesu lub błędu\r\n */\r\nfunction handleStatusState(button, type) {\r\n    if (type !== STATES.SUCCESS && type !== STATES.ERROR) return;\r\n    \r\n    button.classList.add(type);\r\n    resetButtonAnimation(button);\r\n    hideIcon(button, ICONS.SPINNER);\r\n    \r\n    const iconToShow = type === STATES.SUCCESS ? ICONS.CHECK : ICONS.TIMES;\r\n    showIcon(button, iconToShow);\r\n}\r\n\r\n/**\r\n * Resetuje wszystkie ikony w przycisku\r\n */\r\nfunction resetIcons(button) {\r\n    Object.values(ICONS).forEach(icon => hideIcon(button, icon));\r\n    const paperPlane = button.querySelector(ICONS.PAPER_PLANE);\r\n    if (paperPlane) {\r\n        paperPlane.setAttribute('class', 'svg-inline--fa fa-paper-plane');\r\n    }\r\n}\r\n\r\n/**\r\n * Zgłasza błąd do Sentry gdy przycisk nie istnieje\r\n */\r\nfunction reportButtonError() {\r\n    Sentry.captureException(new Error('formButton is null'), {\r\n        extra: {\r\n            url: window.location.href,\r\n            referrer: document.referrer,\r\n            userAgent: navigator.userAgent,\r\n            formName: 'kontakt',\r\n            formAction: window.location.href,\r\n            formMethod: 'POST',\r\n        },\r\n    });\r\n}\r\n\r\n/**\r\n * Inicjalizuje animacje dla przycisku formularza\r\n */\r\nfunction initButtonAnimation() {\r\n    const formButton = document.getElementById('my-form-button');\r\n    if (!formButton) {\r\n        reportButtonError();\r\n        return { animateButton: () => {}, resetButton: () => {} };\r\n    }\r\n\r\n    // Nasłuchiwanie zdarzeń\r\n    formButton.addEventListener('click', () => handleLoadingState(formButton));\r\n    formButton.addEventListener('transitionend', () => {\r\n        if (formButton.classList.contains(STATES.LOADING)) {\r\n            formButton.classList.remove(STATES.LOADING);\r\n        }\r\n    });\r\n\r\n    return {\r\n        animateButton: (type) => handleStatusState(formButton, type),\r\n        resetButton: () => {\r\n            formButton.classList.remove(STATES.LOADING, STATES.SUCCESS, STATES.ERROR);\r\n            formButton.classList.add(STATES.SUBMIT);\r\n            resetIcons(formButton);\r\n        }\r\n    };\r\n}\r\n\r\nexport default initButtonAnimation;"],"names":["STATES","SUBMIT","LOADING","SUCCESS","ERROR","ICONS","PAPER_PLANE","SPINNER","CHECK","TIMES","showIcon","button","iconSelector","icon","querySelector","classList","remove","hideIcon","iconClass","add","resetButtonAnimation","style","animation","handleLoadingState","handleStatusState","type","resetIcons","Object","values","forEach","paperPlane","setAttribute","reportButtonError","Sentry","captureException","Error","extra","url","window","location","href","referrer","document","userAgent","navigator","formName","formAction","formMethod","initButtonAnimation","formButton","getElementById","addEventListener","contains","animateButton","resetButton"],"mappings":"AACA,IAAMA,OAAS,CACXC,OAAQ,SACRC,QAAS,UACTC,QAAS,UACTC,MAAO,OACX,EAEMC,MAAQ,CACVC,YAAa,kBACbC,QAAS,cACTC,MAAO,YACPC,MAAO,WACX,EAOA,SAASC,SAASC,EAAQC,GAChBC,EAAOF,EAAOG,cAAcF,CAAY,EAC1CC,GACAA,EAAKE,UAAUC,OAAO,QAAQ,CAEtC,CAQA,SAASC,SAASN,EAAQO,GAChBL,EAAOF,EAAOG,cAAcI,CAAS,EACvCL,GACAA,EAAKE,UAAUI,IAAI,QAAQ,CAEnC,CAKA,SAASC,qBAAqBT,GAC1BA,EAAOU,MAAMC,UAAY,OAEzBX,EAAOU,MAAMC,UAAY,EAC7B,CAKA,SAASC,mBAAmBZ,GACxBA,EAAOI,UAAUC,OAAOhB,OAAOC,MAAM,EACrCU,EAAOI,UAAUI,IAAInB,OAAOE,OAAO,EACnCe,SAASN,EAAQN,MAAMC,WAAW,EAClCI,SAASC,EAAQN,MAAME,OAAO,CAClC,CAKA,SAASiB,kBAAkBb,EAAQc,GAC3BA,IAASzB,OAAOG,SAAWsB,IAASzB,OAAOI,QAE/CO,EAAOI,UAAUI,IAAIM,CAAI,EACzBL,qBAAqBT,CAAM,EAC3BM,SAASN,EAAQN,MAAME,OAAO,EAG9BG,SAASC,EADUc,IAASzB,OAAOG,QAAUE,MAAMG,MAAQH,MAAMI,KACtC,EAC/B,CAKA,SAASiB,WAAWf,GAChBgB,OAAOC,OAAOvB,KAAK,EAAEwB,QAAQhB,GAAQI,SAASN,EAAQE,CAAI,CAAC,EAC3D,IAAMiB,EAAanB,EAAOG,cAAcT,MAAMC,WAAW,EACrDwB,GACAA,EAAWC,aAAa,QAAS,+BAA+B,CAExE,CAKA,SAASC,oBACLC,OAAOC,iBAAiB,IAAIC,MAAM,oBAAoB,EAAG,CACrDC,MAAO,CACHC,IAAKC,OAAOC,SAASC,KACrBC,SAAUC,SAASD,SACnBE,UAAWC,UAAUD,UACrBE,SAAU,UACVC,WAAYR,OAAOC,SAASC,KAC5BO,WAAY,MAChB,CACJ,CAAC,CACL,CAKA,SAASC,sBACL,IAAMC,EAAaP,SAASQ,eAAe,gBAAgB,EAC3D,OAAKD,GAMLA,EAAWE,iBAAiB,QAAS,IAAM5B,mBAAmB0B,CAAU,CAAC,EACzEA,EAAWE,iBAAiB,gBAAiB,KACrCF,EAAWlC,UAAUqC,SAASpD,OAAOE,OAAO,GAC5C+C,EAAWlC,UAAUC,OAAOhB,OAAOE,OAAO,CAElD,CAAC,EAEM,CACHmD,cAAe,GAAU7B,kBAAkByB,EAAYxB,CAAI,EAC3D6B,YAAa,KACTL,EAAWlC,UAAUC,OAAOhB,OAAOE,QAASF,OAAOG,QAASH,OAAOI,KAAK,EACxE6C,EAAWlC,UAAUI,IAAInB,OAAOC,MAAM,EACtCyB,WAAWuB,CAAU,CACzB,CACJ,IAnBIjB,kBAAkB,EACX,CAAEqB,cAAe,OAAUC,YAAa,MAAS,EAmBhE,gBAEeN"}